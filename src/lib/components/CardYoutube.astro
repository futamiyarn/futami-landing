---
import CardContainer from '@lib/components/CardContainer.astro';
import Card from '@lib/components/Card.astro';
import YoutubeIcon from '@lib/assets/svg/icons/youtube.svg?raw';

import { single, type YouTube } from '@lib/scripts/yt-grabber';
import youtube from '@lib/data/youtube.json';

interface Props {
	nameGroup?: string;
	footer_name?: string;
	footer_url?: string;
	channel_id?: string;
	limit_videos?: number;
}

const { nameGroup, footer_name, footer_url, channel_id, limit_videos } =
	Astro.props;
const yt_data = await single(channel_id ?? youtube.futami.id, limit_videos);
---

<CardContainer
	nameGroup={nameGroup ?? 'Videos'}
	footer_name={footer_name}
	footer_url={footer_url ?? '#'}
>
	{
		yt_data.items.map((item: YouTube) => (
			<Card
				name={item.title}
				description={item.author}
				url={'https://www.youtube.com/shorts/' + item.id}
				svg={YoutubeIcon}
				bgImage={`https://img.youtube.com/vi/${item.id}/mqdefault.jpg`}
			/>
		))
	}
</CardContainer>
